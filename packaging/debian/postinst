#!/bin/bash
#
# LinuxStudio Post-Installation Script
#

set -e

case "$1" in
    configure)
        echo "ðŸ“¦ Configuring LinuxStudio..."
        
        # åˆ›å»ºç¬¦å·é“¾æŽ¥ï¼ˆå‘åŽå…¼å®¹ï¼‰
        if [ ! -L /usr/bin/linuxstudio ]; then
            ln -sf /usr/bin/xkl /usr/bin/linuxstudio
        fi
        
        # è®¾ç½®æƒé™
        chmod +x /usr/bin/xkl
        
        # åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰
        if [ ! -f /etc/linuxstudio/config.yaml ]; then
            mkdir -p /etc/linuxstudio
            cat > /etc/linuxstudio/config.yaml <<'EOF'
# LinuxStudio Configuration
version: 1.0.0
install_path: /opt/linuxstudio
log_level: info
auto_update_check: true
EOF
        fi
        
        # åˆå§‹åŒ–æ¡†æž¶
        if [ -x /usr/bin/xkl ]; then
            /usr/bin/xkl init --quiet 2>/dev/null || true
        fi
        
        echo ""
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
        echo "â•‘  âœ… LinuxStudio installed successfully!              â•‘"
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo ""
        echo "ðŸ“š Quick Start:"
        echo "   xkl --help              # Show help"
        echo "   xkl status              # Check system status"
        echo "   xkl scene apply web     # Apply web development scene"
        echo "   xkl plugin list         # List available plugins"
        echo ""
        echo "ðŸ“– Documentation: https://docs.linuxstudio.org"
        echo "ðŸ’¬ Community: https://community.linuxstudio.org"
        echo ""
        ;;
        
    abort-upgrade|abort-remove|abort-deconfigure)
        ;;
        
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

#DEBHELPER#

exit 0

